<%- include("partials/headerAdmin") %>

<div class="container mt-5">

  <!-- TITLE -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-bold text-primary">
      üí¨ Customer Feedback
    </h2>

    <span class="badge bg-secondary fs-6 px-3 py-2">
      Total: <%= feedback.length %>
    </span>
  </div>


  <!-- FEEDBACK TABLE WRAPPER -->
  <div class="card shadow-sm border-0">
    <div class="card-body p-0">

      <table class="table table-hover mb-0">
        <thead class="table-dark text-center">
          <tr>
            <th>User</th>
            <th>Rating</th>
            <th>Feedback</th>
            <th>Date</th>
          </tr>
        </thead>

        <tbody>

          <% if (feedback.length === 0) { %>
            <tr>
              <td colspan="4" class="text-center py-4 text-muted">
                üòî No feedback submitted yet.
              </td>
            </tr>
          <% } else { %>

            <% feedback.forEach(f => { %>
              <tr>
                <td class="fw-bold text-center"><%= f.username %></td>

                <!-- RATING WITH COLORED STARS -->
                <td class="text-center">
                  <span class="badge bg-warning text-dark">
                    ‚≠ê <%= f.rating %> / 5
                  </span>
                </td>

                <!-- FEEDBACK TEXT -->
                <td style="max-width: 350px;">
                  <div class="text-wrap" style="word-break: break-word;">
                    <%= f.feedback_text %>
                  </div>
                </td>

                <!-- DATE -->
                <td class="text-muted text-center">
                  <%= new Date(f.created_at).toLocaleString() %>
                </td>
              </tr>
            <% }) %>

          <% } %>

        </tbody>
      </table>

    </div>
  </div>


  <!-- BACK BUTTON -->
  <div class="mt-4">
    <a href="/inventory" class="btn btn-outline-secondary">
      ‚Üê Back to Inventory
    </a>
  </div>

</div>
